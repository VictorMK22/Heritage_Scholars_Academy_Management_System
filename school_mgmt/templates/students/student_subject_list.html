{% extends "base.html" %}

{% block title %}My Subjects - Heritage Scholars Academy{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="h3 mb-0">My Subjects</h1>
        {% if current_class %}
            <span class="badge bg-primary fs-6">Class: {{ current_class.name }}</span>
        {% endif %}
    </div>

    <div class="row">
        {% for subject in subjects %}
        <div class="col-md-6 col-lg-4 mb-4">
            <div class="card h-100 shadow-sm border-0">
                <div class="card-header bg-primary text-white py-3">
                    <h5 class="card-title mb-0 fs-6">
                        <i class="fas fa-book me-2"></i>{{ subject.name }}
                    </h5>
                </div>
                <div class="card-body">
                    <div class="mb-3">
                        <small class="text-muted">TEACHER</small>
                        <p class="mb-0">
                            {% if subject.teacher %}
                                <i class="fas fa-user-tie me-2 text-primary"></i>
                                {{ subject.teacher.user.get_full_name|default:subject.teacher.user.username }}
                            {% else %}
                                <i class="fas fa-user-slash me-2 text-muted"></i>
                                <span class="text-muted">Not assigned</span>
                            {% endif %}
                        </p>
                    </div>

                    <div class="row">
                        <div class="col-6 mb-2">
                            <small class="text-muted">TERM</small>
                            <p class="mb-0">
                                <i class="fas fa-calendar me-2 text-info"></i>
                                {{ subject.term|default:"-" }}
                            </p>
                        </div>
                        <div class="col-6 mb-2">
                            <small class="text-muted">YEAR</small>
                            <p class="mb-0">
                                <i class="fas fa-calendar-alt me-2 text-success"></i>
                                {{ subject.academic_year }}
                            </p>
                        </div>
                    </div>

                    {% if subject.class_assigned %}
                    <div class="mb-2">
                        <small class="text-muted">CLASS</small>
                        <p class="mb-0">
                            <i class="fas fa-users me-2 text-warning"></i>
                            {{ subject.class_assigned.name }}
                        </p>
                    </div>
                    {% endif %}
                </div>
                <div class="card-footer bg-transparent border-0 pt-0">
                    <div class="d-flex gap-2">
                        <a href="{% url 'academics:subject_detail' subject.pk %}" 
                           class="btn btn-sm btn-outline-primary flex-fill">
                            <i class="fas fa-eye me-1"></i>Details
                        </a>
                    </div>
                </div>
            </div>
        </div>
        {% empty %}
        <div class="col-12">
            <div class="text-center py-5">
                <i class="fas fa-book-open fa-3x text-muted mb-3"></i>
                <h4 class="text-muted">No Subjects Assigned</h4>
                <p class="text-muted">
                    {% if current_class %}
                        No subjects found for {{ current_class.name }}.
                    {% else %}
                        You are not assigned to any class yet.
                    {% endif %}
                </p>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}